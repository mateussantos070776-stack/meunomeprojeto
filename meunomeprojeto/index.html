<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KERIX M√çDIA - PREMIUM</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <style>
        :root {
            --primary: #ff0000;
            --primary-dark: #8b0000;
            --bg: #050505;
            --card: #121212;
            --input: #1a1a1a;
            --text: #ffffff;
        }

        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .main-container {
            width: 95%;
            max-width: 450px;
            background: var(--card);
            border-radius: 24px;
            border: 1px solid #222;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(255, 0, 0, 0.1);
        }

        /* Abas Superiores */
        .tabs {
            display: flex;
            background: #000;
            border-bottom: 1px solid #222;
        }

        .tab-btn {
            flex: 1;
            padding: 18px;
            border: none;
            background: transparent;
            color: #666;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .tab-btn.active {
            color: var(--primary);
            background: rgba(255, 0, 0, 0.05);
            border-bottom: 2px solid var(--primary);
        }

        .content { padding: 30px; display: none; }
        .content.active { display: block; }

        /* Estiliza√ß√£o de Elementos */
        h2 { margin-top: 0; font-size: 22px; text-align: center; }
        input, textarea {
            width: 100%; padding: 14px; margin: 8px 0;
            border-radius: 12px; border: 1px solid #333;
            background: var(--input); color: #fff; box-sizing: border-box;
            outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--primary); }

        button {
            width: 100%; padding: 15px; margin: 10px 0;
            border-radius: 12px; border: none; font-weight: 800;
            cursor: pointer; transition: 0.3s; text-transform: uppercase;
        }

        .btn-main { background: var(--primary); color: white; }
        .btn-main:hover { background: var(--primary-dark); transform: translateY(-2px); }
        
        .btn-outline { background: transparent; border: 1px solid #333; color: #999; }
        .btn-outline:hover { border-color: var(--primary); color: #fff; }

        .data-display {
            background: #000; border: 1px solid #222;
            border-radius: 15px; padding: 15px; margin: 15px 0;
            text-align: center;
        }

        .chat-box {
            height: 250px; overflow-y: auto; background: #080808;
            border-radius: 12px; padding: 10px; border: 1px solid #1a1a1a;
            margin-bottom: 10px; font-size: 14px;
        }

        .msg { margin-bottom: 8px; padding: 8px 12px; border-radius: 8px; width: fit-content; max-width: 85%; }
        .msg-adm { background: var(--primary-dark); color: white; margin-left: auto; }
        .msg-mem { background: #222; color: #ccc; }
    </style>
</head>
<body>

    <div class="main-container">
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('membros')">üë§ MEMBROS</button>
            <button class="tab-btn" onclick="switchTab('adm')">üîí ADM</button>
        </div>

        <div id="membros" class="content active">
            <h2>Acesso Exclusivo</h2>
            <input type="text" id="mem-nome" placeholder="Seu Nome">
            <input type="text" id="mem-user" placeholder="Usu√°rio">
            <input type="text" id="mem-key" placeholder="Chave de Acesso">
            <button class="btn-main" onclick="loginMembro()">ENTRAR NO SISTEMA</button>
            
            <div id="area-logada" style="display:none;">
                <div class="chat-box" id="chat-mem"></div>
                <textarea id="msg-mem-input" placeholder="Sua mensagem..."></textarea>
                <button class="btn-main" onclick="enviarMsg('MEMBRO')">ENVIAR</button>
            </div>
        </div>

        <div id="adm" class="content">
            <div id="adm-login">
                <h2>Painel de Controle</h2>
                <input type="text" id="adm-user-in" placeholder="Login ADM">
                <input type="password" id="adm-pass-in" placeholder="Senha">
                <button class="btn-main" onclick="loginAdm()">AUTENTICAR</button>
            </div>

            <div id="adm-panel" style="display:none;">
                <div class="data-display">
                    <p style="font-size: 12px; color: #666; margin: 0;">ACESSO ATIVO</p>
                    <div id="display-acesso" style="font-size: 18px; color: var(--primary); font-weight: bold; margin-top: 5px;">---</div>
                </div>
                <button class="btn-main" onclick="generateKey()">GERAR NOVO ACESSO</button>
                <button class="btn-outline" onclick="copyAccess()">COPIAR DADOS</button>
                
                <h3 style="font-size: 14px; margin-top: 20px;">CHAT DE SUPORTE</h3>
                <div class="chat-box" id="chat-adm-view"></div>
                <textarea id="msg-adm-input" placeholder="Resposta do ADM..."></textarea>
                <button class="btn-main" onclick="enviarMsg('ADM')">RESPONDER</button>
                <button class="btn-outline" onclick="limparTudo()" style="color: var(--primary);">LIMPAR TUDO</button>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURA√á√ÉO FIREBASE (Sua config original mantida para n√£o quebrar)
        const firebaseConfig = {
            apiKey: "AIzaSyA-uzWKwZ5aW-t40uamPDpHLqx3Yd4ei8g",
            authDomain: "kerix-midia.firebaseapp.com",
            databaseURL: "https://kerix-midia-default-rtdb.firebaseio.com",
            projectId: "kerix-midia",
            storageBucket: "kerix-midia.firebasestorage.app",
            messagingSenderId: "1009939877055",
            appId: "1:1009939877055:web:42b9c88989f9e17cffca0a"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let currentU = "", currentK = "", nomeUser = "";

        // Sincroniza√ß√£o
        db.ref('acesso').on('value', s => {
            const d = s.val();
            if(d) {
                currentU = d.usuario; currentK = d.chave;
                document.getElementById('display-acesso').innerText = `U: ${currentU} | K: ${currentK}`;
            }
        });

        db.ref('mensagens').on('value', s => {
            let h = "";
            s.forEach(m => {
                const isAdm = m.val().autor === 'ADM';
                h += `<div class="msg ${isAdm ? 'msg-adm' : 'msg-mem'}"><b>${m.val().autor}:</b> ${m.val().texto}</div>`;
            });
            document.getElementById('chat-mem').innerHTML = h;
            document.getElementById('chat-adm-view').innerHTML = h;
            document.querySelectorAll('.chat-box').forEach(b => b.scrollTop = b.scrollHeight);
        });

        // Fun√ß√µes
        function switchTab(t) {
            document.querySelectorAll('.content, .tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(t).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function loginAdm() {
            if(document.getElementById('adm-user-in').value === "1515" && document.getElementById('adm-pass-in').value === "151") {
                document.getElementById('adm-login').style.display = 'none';
                document.getElementById('adm-panel').style.display = 'block';
            } else { alert("Acesso Negado!"); }
        }

        function generateKey() {
            const u = Math.floor(Math.random() * 899999 + 111111).toString();
            const k = Math.floor(Math.random() * 899999 + 111111).toString();
            db.ref('acesso').set({ usuario: u, chave: k });
        }

        function loginMembro() {
            const n = document.getElementById('mem-nome').value;
            const u = document.getElementById('mem-user').value;
            const k = document.getElementById('mem-key').value;
            if(n && u === currentU && k === currentK) {
                nomeUser = n;
                document.querySelectorAll('#membros input, #membros button:first-of-type').forEach(e => e.style.display = 'none');
                document.getElementById('area-logada').style.display = 'block';
            } else { alert("Dados incorretos!"); }
        }

        function enviarMsg(tipo) {
            const input = tipo === 'ADM' ? document.getElementById('msg-adm-input') : document.getElementById('msg-mem-input');
            if(input.value) {
                db.ref('mensagens').push({ autor: tipo === 'ADM' ? 'ADM' : nomeUser, texto: input.value });
                input.value = "";
            }
        }

        function copyAccess() {
            navigator.clipboard.writeText(`üë§ USU√ÅRIO: ${currentU}\nüîë CHAVE: ${currentK}`);
            alert("Copiado!");
        }

        function limparTudo() { if(confirm("Deseja apagar todas as mensagens?")) db.ref('mensagens').remove(); }
    </script>
</body>
</html>
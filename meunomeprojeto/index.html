<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KERIX M√çDIA - ADM PROFISSIONAL</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <style>
        /* CORES E ESTILO BASE */
        :root { --bg: #0a0a0a; --card: #161616; --blue: #007bff; --green: #28a745; --red: #dc3545; --text: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; display: flex; align-items: center; justify-content: center; min-height: 100vh; }
        
        .screen { display: none; width: 90%; max-width: 400px; background: var(--card); padding: 30px; border-radius: 20px; border: 1px solid #333; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #444; background: #222; color: #fff; box-sizing: border-box; }
        button { width: 100%; padding: 14px; margin: 10px 0; cursor: pointer; border-radius: 8px; border: none; font-weight: bold; transition: 0.3s; color: white; }
        
        .btn-blue { background: var(--blue); }
        .btn-green { background: var(--green); }
        .btn-red { background: var(--red); }
        .btn-gray { background: #333; }
        .data-box { background: #000; padding: 15px; border-radius: 10px; border: 1px solid #333; margin: 15px 0; text-align: left; max-height: 200px; overflow-y: auto; }

        /* PAINEL ADM EXPANDIDO */
        #screen-adm-panel { max-width: 800px; }
        .adm-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .full-width { grid-column: span 2; }
    </style>
</head>
<body>

    <div id="screen-adm-login" class="screen" style="display:block;">
        <h2 style="color: var(--blue);">Acesso Administrativo</h2>
        <input type="text" id="adm-user" placeholder="Usu√°rio">
        <input type="password" id="adm-pass" placeholder="Senha">
        <button class="btn-blue" onclick="checkAdm()">ENTRAR NO PAINEL</button>
        <button class="btn-gray" onclick="window.location.href='/'">Voltar</button>
    </div>

    <div id="screen-adm-panel" class="screen">
        <h2 style="border-bottom: 1px solid #333; padding-bottom: 10px;">Painel Kerix Pro</h2>
        
        <div class="adm-grid">
            <div class="data-box" style="text-align: center;">
                <small>USU√ÅRIO ATUAL</small>
                <div id="adm-curr-user" style="font-size: 20px; font-weight: bold; color: var(--blue);">---</div>
            </div>
            <div class="data-box" style="text-align: center;">
                <small>CHAVE ATUAL</small>
                <div id="adm-curr-key" style="font-size: 20px; font-weight: bold; color: var(--blue);">---</div>
            </div>
            
            <button class="btn-green full-width" onclick="generateKey()">GERAR NOVO ACESSO</button>
            <button class="btn-blue" onclick="copyAccess()">COPIAR ACESSO</button>
            <button class="btn-red" onclick="removerUsuario()">LIMPAR USU√ÅRIOS</button>
        </div>

        <h3>Chat e Membros</h3>
        <div id="chat-box-adm" class="data-box" style="height: 150px;"></div>
        <textarea id="msg-adm" placeholder="Responder membro..."></textarea>
        <button class="btn-blue" onclick="enviarMsg('ADM')">ENVIAR MENSAGEM</button>
        <button class="btn-gray" onclick="location.reload()">SAIR</button>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyA-uzWKwZ5aW-t40uamPDpHLqx3Yd4ei8g",
            authDomain: "kerix-midia.firebaseapp.com",
            databaseURL: "https://kerix-midia-default-rtdb.firebaseio.com",
            projectId: "kerix-midia",
            storageBucket: "kerix-midia.firebasestorage.app",
            messagingSenderId: "1009939877055",
            appId: "1:1009939877055:web:42b9c88989f9e17cffca0a"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let currentKey = "";
        let currentUser = "";

        // Sincroniza√ß√£o em tempo real
        db.ref('acesso').on('value', (s) => {
            const data = s.val();
            if(data) {
                currentKey = data.chave;
                currentUser = data.usuario;
                document.getElementById('adm-curr-user').innerText = currentUser;
                document.getElementById('adm-curr-key').innerText = currentKey;
            }
        });

        db.ref('mensagens').on('value', (s) => {
            let html = "";
            s.forEach(m => { html += `<div><b>${m.val().autor}:</b> ${m.val().texto}</div>`; });
            const box = document.getElementById('chat-box-adm');
            box.innerHTML = html;
            box.scrollTop = box.scrollHeight;
        });

        function checkAdm() {
            const u = document.getElementById('adm-user').value;
            const p = document.getElementById('adm-pass').value;
            if(u === "1515" && p === "151") {
                document.getElementById('screen-adm-login').style.display = 'none';
                document.getElementById('screen-adm-panel').style.display = 'block';
            } else { alert("Dados incorretos!"); }
        }

        function generateKey() {
            const u = Math.floor(Math.random() * 899999 + 111111).toString();
            const k = Math.floor(Math.random() * 899999 + 111111).toString();
            db.ref('acesso').set({ usuario: u, chave: k });
        }

        function enviarMsg(autor) {
            const input = document.getElementById('msg-adm');
            if(input.value) {
                db.ref('mensagens').push({ autor: autor, texto: input.value });
                input.value = "";
            }
        }

        function removerUsuario() { if(confirm("Limpar lista?")) db.ref('usuarios').remove(); }

        function copyAccess() {
            const text = `üé• KERIX M√çDIA\nüë§ USU√ÅRIO: ${currentUser}\nüîë CHAVE: ${currentKey}`;
            navigator.clipboard.writeText(text);
            alert("Copiado!");
        }
    </script>
</body>
</html>